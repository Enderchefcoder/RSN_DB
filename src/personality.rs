use std::collections::hash_map::DefaultHasher;
use std::hash::{Hash, Hasher};

#[derive(Debug, Clone, Copy, PartialEq, Eq)]
pub enum Mode {
    Professional,
    Friendly,
    Snarky,
}

impl Default for Mode {
    fn default() -> Self {
        Mode::Professional
    }
}

pub struct Personality {
    mode: Mode,
}

impl Personality {
    pub fn new(mode: Mode) -> Self {
        Self { mode }
    }

    pub fn is_professional(&self) -> bool {
        self.mode == Mode::Professional
    }

    pub fn welcome(&self) -> String {
        match self.mode {
            Mode::Professional => "RSN DB Ready.".to_string(),
            Mode::Friendly => "Welcome back!".to_string(),
            Mode::Snarky => {
                "Oh good, you're back. Let's pretend this will be flawless.".to_string()
            }
        }
    }

    pub fn success(&self, message: &str) -> String {
        match self.mode {
            Mode::Professional => format!("✓ {}", message),
            Mode::Friendly => format!("✓ Done! {}.", message),
            Mode::Snarky => {
                let options = [
                    "Nice. A command that worked on the first try.",
                    "Functional output. What a plot twist.",
                    "No crash, no smoke, no tears. Impressive.",
                    "It worked. Mark your calendar.",
                ];
                format!("✓ {} {}", message, self.select(options.as_slice(), message))
            }
        }
    }

    pub fn error(&self, error_label: &str) -> String {
        match self.mode {
            Mode::Professional => format!("✗ {}", error_label),
            Mode::Friendly => format!("✗ Oops! {}.", error_label),
            Mode::Snarky => {
                let reference = self.reference_for(error_label);
                let options = [
                    "Precision matters. You supplied chaos.",
                    "I asked for syntax; you sent interpretive dance.",
                    "This command is less coherent than a Monday standup.",
                    "If mistakes were currency, you'd be venture funded.",
                ];
                format!(
                    "✗ {}. {} Reference: {}.",
                    error_label,
                    self.select(options.as_slice(), error_label),
                    reference
                )
            }
        }
    }

    pub fn typo_suggestion(&self, typo: &str, expected: &str) -> String {
        match self.mode {
            Mode::Professional => format!("Unknown: {}. Did you mean {}?", typo, expected),
            Mode::Friendly => format!("I couldn't find `{}`. Did you mean `{}`?", typo, expected),
            Mode::Snarky => {
                let seed = format!("{}->{}", typo, expected);
                let reference = self.reference_for(&seed);
                let options = [
                    "Bold strategy. Wrong command, strong confidence.",
                    "That spelling has the structural integrity of wet cardboard.",
                    "You were one keyboard wobble away from success.",
                    "So close. Yet somehow still dramatically wrong.",
                ];
                format!(
                    "`{}` isn't a command. Did you mean `{}`? {}\n  Reference of the day: {}.",
                    typo,
                    expected,
                    self.select(options.as_slice(), &seed),
                    reference
                )
            }
        }
    }

    pub fn empty_input(&self, count: u32) -> String {
        match self.mode {
            Mode::Professional => String::new(),
            Mode::Friendly => {
                if count <= 1 {
                    String::new()
                } else {
                    "No command entered. Type HELP if you need examples.".to_string()
                }
            }
            Mode::Snarky => match count {
                0 | 1 => String::new(),
                2 => "  ...hello?".to_string(),
                3 => "  Okay, I get it. You're having a moment.\n  Take your time. I'm just sitting here, managing your\n  data, keeping your indexes fresh, protecting your\n  referential integrity from your questionable decisions.\n  \n  No rush. Really.".to_string(),
                _ => {
                    let reference = self.reference_for(&format!("empty-{count}"));
                    format!(
                        "  Silence again. I'm benchmarking your pause against {}.\n  Congratulations: your latency is still higher.",
                        reference
                    )
                }
            },
        }
    }

    pub fn achievement_unlocked(&self) -> String {
        match self.mode {
            Mode::Professional => "Achievement unlocked!".to_string(),
            Mode::Friendly => "Achievement unlocked! Nice momentum—keep going.".to_string(),
            Mode::Snarky => {
                let options = [
                    "Achievement unlocked: Competence detected.",
                    "Achievement unlocked: You read the syntax for once.",
                    "Achievement unlocked: Fewer disasters per minute.",
                    "Achievement unlocked: Query literacy is improving.",
                ];
                self.select(options.as_slice(), "achievement").to_string()
            }
        }
    }

    pub fn competent_streak(&self) -> String {
        match self.mode {
            Mode::Professional => "[SYSTEM]: Achievement unlocked: Actually Competent".to_string(),
            Mode::Friendly => "[SYSTEM]: Achievement unlocked: Actually Competent\n[SYSTEM]: That was a clean streak. Nicely done.".to_string(),
            Mode::Snarky => "  Wait. Hold on.\n  \n  Did you just complete 50 commands without a typo?\n  No syntax errors? Not even a rogue comma?\n  \n  That's unsettling.\n  [SYSTEM]: Achievement unlocked: \"Actually Competent\"\n  [SYSTEM]: Reclassifying user from \"chaotic\" to \"occasionally dangerous in a good way\".".to_string(),
        }
    }

    pub fn why_mean(&self) -> String {
        match self.mode {
            Mode::Professional => "I'm not mean. I'm precise.".to_string(),
            Mode::Friendly => {
                "I'm not trying to be mean—just direct so your queries stay correct.".to_string()
            }
            Mode::Snarky => {
                let reference = self.reference_for("why-mean");
                format!(
                    "  I'm not mean. I'm exact.\n  You make mistakes; I annotate them.\n  That's called tooling, not bullying.\n  \n  Reference: {}. It is also exact.",
                    reference
                )
            }
        }
    }

    pub fn help_optimize(&self) -> String {
        match self.mode {
            Mode::Professional => "OPTIMIZE <table>\nRebuild indexes and compact storage for better read performance.".to_string(),
            Mode::Friendly => "OPTIMIZE <table>\nRebuilds indexes and compacts storage for faster queries.\n\nExample:\n  OPTIMIZE users".to_string(),
            Mode::Snarky => {
                let reference = self.reference_for("help-optimize");
                let options = [
                    "Use this before complaining that reads are slow.",
                    "Great command. Prevents avoidable whining.",
                    "Runs maintenance so your future self can stop panicking.",
                    "Yes, this is the thing you forgot before benchmarking.",
                ];
                format!(
                    "╭──────────────────────────────────────────────────────────╮\n│  OPTIMIZE <table>                                        │\n│                                                          │\n│  Rebuilds indexes and compacts storage for faster       │\n│  queries. You know, the thing you should've done        │\n│  before complaining about performance.                  │\n│                                                          │\n│  Example:                                               │\n│    OPTIMIZE users                                       │\n│                                                          │\n│  Note: This takes time. Maybe use it to reflect on      │\n│  your life choices. Or learn to type. Either works.     │\n│  {}                                                    │\n│  Reference: {}                                         │\n╰──────────────────────────────────────────────────────────╯",
                    self.select(options.as_slice(), reference),
                    reference
                )
            }
        }
    }

    pub fn explain_typo(&self) -> String {
        match self.mode {
            Mode::Professional => "Unknown command: 'EXPLIN'. Did you mean: EXPLAIN ?".to_string(),
            Mode::Friendly => "Unknown command: 'EXPLIN'\nDid you mean: EXPLAIN ?".to_string(),
            Mode::Snarky => {
                let reference = self.reference_for("explin");
                let options = [
                    "You misspelled the word that's literally in HELP.",
                    "A six-letter command defeated you in public.",
                    "I've seen autocorrect do better while offline.",
                    "That typo had intent. Bad intent, but intent.",
                ];
                format!(
                    "✗ Unknown command: 'EXPLIN'\n\n  Did you mean: EXPLAIN ?\n  {}\n  Reference: {}.",
                    self.select(options.as_slice(), reference),
                    reference
                )
            }
        }
    }

    pub fn batch_committed(&self, operations: usize) -> String {
        match self.mode {
            Mode::Professional => format!("Batch executed: {} ops.", operations),
            Mode::Friendly => format!("Batch complete: {} operation(s) committed.", operations),
            Mode::Snarky => {
                let reference = self.reference_for(&format!("batch-{operations}"));
                format!(
                    "Batch done: {} operation(s). Stability level: {}.",
                    operations, reference
                )
            }
        }
    }

    fn select<'a>(&self, options: &'a [&'a str], seed: &str) -> &'a str {
        let index = self.index_for(seed, options.len());
        options[index]
    }

    fn reference_for(&self, seed: &str) -> &'static str {
        let index = self.index_for(seed, REAL_THINGS.len());
        REAL_THINGS[index]
    }

    fn index_for(&self, seed: &str, size: usize) -> usize {
        let mut hasher = DefaultHasher::new();
        seed.hash(&mut hasher);
        (hasher.finish() as usize) % size
    }
}

pub const STARTUP_BANNER: &str = r#"
╔══════════════════════════════════════════════════════════════╗
║                                                              ║
║     ██████╗ ███████╗███╗   ██╗    ██████╗ ██████╗           ║
║     ██╔══██╗██╔════╝████╗  ██║    ██╔══██╗██╔══██╗          ║
║     ██████╔╝███████╗██╔██╗ ██║    ██║  ██║██████╔╝          ║
║     ██╔══██╗╚════██║██║╚██╗██║    ██║  ██║██╔══██╗          ║
║     ██║  ██║███████║██║ ╚████║    ██████╔╝██████╔╝          ║
║     ╚═╝  ╚═╝╚══════╝╚═╝  ╚═══╝    ╚═════╝ ╚═════╝           ║
║                                                              ║
╚══════════════════════════════════════════════════════════════╝
"#;

pub const REAL_THINGS: [&str; 1000] = [
    "prime number 2",
    "prime number 3",
    "prime number 5",
    "prime number 7",
    "prime number 11",
    "prime number 13",
    "prime number 17",
    "prime number 19",
    "prime number 23",
    "prime number 29",
    "prime number 31",
    "prime number 37",
    "prime number 41",
    "prime number 43",
    "prime number 47",
    "prime number 53",
    "prime number 59",
    "prime number 61",
    "prime number 67",
    "prime number 71",
    "prime number 73",
    "prime number 79",
    "prime number 83",
    "prime number 89",
    "prime number 97",
    "prime number 101",
    "prime number 103",
    "prime number 107",
    "prime number 109",
    "prime number 113",
    "prime number 127",
    "prime number 131",
    "prime number 137",
    "prime number 139",
    "prime number 149",
    "prime number 151",
    "prime number 157",
    "prime number 163",
    "prime number 167",
    "prime number 173",
    "prime number 179",
    "prime number 181",
    "prime number 191",
    "prime number 193",
    "prime number 197",
    "prime number 199",
    "prime number 211",
    "prime number 223",
    "prime number 227",
    "prime number 229",
    "prime number 233",
    "prime number 239",
    "prime number 241",
    "prime number 251",
    "prime number 257",
    "prime number 263",
    "prime number 269",
    "prime number 271",
    "prime number 277",
    "prime number 281",
    "prime number 283",
    "prime number 293",
    "prime number 307",
    "prime number 311",
    "prime number 313",
    "prime number 317",
    "prime number 331",
    "prime number 337",
    "prime number 347",
    "prime number 349",
    "prime number 353",
    "prime number 359",
    "prime number 367",
    "prime number 373",
    "prime number 379",
    "prime number 383",
    "prime number 389",
    "prime number 397",
    "prime number 401",
    "prime number 409",
    "prime number 419",
    "prime number 421",
    "prime number 431",
    "prime number 433",
    "prime number 439",
    "prime number 443",
    "prime number 449",
    "prime number 457",
    "prime number 461",
    "prime number 463",
    "prime number 467",
    "prime number 479",
    "prime number 487",
    "prime number 491",
    "prime number 499",
    "prime number 503",
    "prime number 509",
    "prime number 521",
    "prime number 523",
    "prime number 541",
    "prime number 547",
    "prime number 557",
    "prime number 563",
    "prime number 569",
    "prime number 571",
    "prime number 577",
    "prime number 587",
    "prime number 593",
    "prime number 599",
    "prime number 601",
    "prime number 607",
    "prime number 613",
    "prime number 617",
    "prime number 619",
    "prime number 631",
    "prime number 641",
    "prime number 643",
    "prime number 647",
    "prime number 653",
    "prime number 659",
    "prime number 661",
    "prime number 673",
    "prime number 677",
    "prime number 683",
    "prime number 691",
    "prime number 701",
    "prime number 709",
    "prime number 719",
    "prime number 727",
    "prime number 733",
    "prime number 739",
    "prime number 743",
    "prime number 751",
    "prime number 757",
    "prime number 761",
    "prime number 769",
    "prime number 773",
    "prime number 787",
    "prime number 797",
    "prime number 809",
    "prime number 811",
    "prime number 821",
    "prime number 823",
    "prime number 827",
    "prime number 829",
    "prime number 839",
    "prime number 853",
    "prime number 857",
    "prime number 859",
    "prime number 863",
    "prime number 877",
    "prime number 881",
    "prime number 883",
    "prime number 887",
    "prime number 907",
    "prime number 911",
    "prime number 919",
    "prime number 929",
    "prime number 937",
    "prime number 941",
    "prime number 947",
    "prime number 953",
    "prime number 967",
    "prime number 971",
    "prime number 977",
    "prime number 983",
    "prime number 991",
    "prime number 997",
    "prime number 1009",
    "prime number 1013",
    "prime number 1019",
    "prime number 1021",
    "prime number 1031",
    "prime number 1033",
    "prime number 1039",
    "prime number 1049",
    "prime number 1051",
    "prime number 1061",
    "prime number 1063",
    "prime number 1069",
    "prime number 1087",
    "prime number 1091",
    "prime number 1093",
    "prime number 1097",
    "prime number 1103",
    "prime number 1109",
    "prime number 1117",
    "prime number 1123",
    "prime number 1129",
    "prime number 1151",
    "prime number 1153",
    "prime number 1163",
    "prime number 1171",
    "prime number 1181",
    "prime number 1187",
    "prime number 1193",
    "prime number 1201",
    "prime number 1213",
    "prime number 1217",
    "prime number 1223",
    "prime number 1229",
    "prime number 1231",
    "prime number 1237",
    "prime number 1249",
    "prime number 1259",
    "prime number 1277",
    "prime number 1279",
    "prime number 1283",
    "prime number 1289",
    "prime number 1291",
    "prime number 1297",
    "prime number 1301",
    "prime number 1303",
    "prime number 1307",
    "prime number 1319",
    "prime number 1321",
    "prime number 1327",
    "prime number 1361",
    "prime number 1367",
    "prime number 1373",
    "prime number 1381",
    "prime number 1399",
    "prime number 1409",
    "prime number 1423",
    "prime number 1427",
    "prime number 1429",
    "prime number 1433",
    "prime number 1439",
    "prime number 1447",
    "prime number 1451",
    "prime number 1453",
    "prime number 1459",
    "prime number 1471",
    "prime number 1481",
    "prime number 1483",
    "prime number 1487",
    "prime number 1489",
    "prime number 1493",
    "prime number 1499",
    "prime number 1511",
    "prime number 1523",
    "prime number 1531",
    "prime number 1543",
    "prime number 1549",
    "prime number 1553",
    "prime number 1559",
    "prime number 1567",
    "prime number 1571",
    "prime number 1579",
    "prime number 1583",
    "prime number 1597",
    "prime number 1601",
    "prime number 1607",
    "prime number 1609",
    "prime number 1613",
    "prime number 1619",
    "prime number 1621",
    "prime number 1627",
    "prime number 1637",
    "prime number 1657",
    "prime number 1663",
    "prime number 1667",
    "prime number 1669",
    "prime number 1693",
    "prime number 1697",
    "prime number 1699",
    "prime number 1709",
    "prime number 1721",
    "prime number 1723",
    "prime number 1733",
    "prime number 1741",
    "prime number 1747",
    "prime number 1753",
    "prime number 1759",
    "prime number 1777",
    "prime number 1783",
    "prime number 1787",
    "prime number 1789",
    "prime number 1801",
    "prime number 1811",
    "prime number 1823",
    "prime number 1831",
    "prime number 1847",
    "prime number 1861",
    "prime number 1867",
    "prime number 1871",
    "prime number 1873",
    "prime number 1877",
    "prime number 1879",
    "prime number 1889",
    "prime number 1901",
    "prime number 1907",
    "prime number 1913",
    "prime number 1931",
    "prime number 1933",
    "prime number 1949",
    "prime number 1951",
    "prime number 1973",
    "prime number 1979",
    "prime number 1987",
    "prime number 1993",
    "prime number 1997",
    "prime number 1999",
    "prime number 2003",
    "prime number 2011",
    "prime number 2017",
    "prime number 2027",
    "prime number 2029",
    "prime number 2039",
    "prime number 2053",
    "prime number 2063",
    "prime number 2069",
    "prime number 2081",
    "prime number 2083",
    "prime number 2087",
    "prime number 2089",
    "prime number 2099",
    "prime number 2111",
    "prime number 2113",
    "prime number 2129",
    "prime number 2131",
    "prime number 2137",
    "prime number 2141",
    "prime number 2143",
    "prime number 2153",
    "prime number 2161",
    "prime number 2179",
    "prime number 2203",
    "prime number 2207",
    "prime number 2213",
    "prime number 2221",
    "prime number 2237",
    "prime number 2239",
    "prime number 2243",
    "prime number 2251",
    "prime number 2267",
    "prime number 2269",
    "prime number 2273",
    "prime number 2281",
    "prime number 2287",
    "prime number 2293",
    "prime number 2297",
    "prime number 2309",
    "prime number 2311",
    "prime number 2333",
    "prime number 2339",
    "prime number 2341",
    "prime number 2347",
    "prime number 2351",
    "prime number 2357",
    "prime number 2371",
    "prime number 2377",
    "prime number 2381",
    "prime number 2383",
    "prime number 2389",
    "prime number 2393",
    "prime number 2399",
    "prime number 2411",
    "prime number 2417",
    "prime number 2423",
    "prime number 2437",
    "prime number 2441",
    "prime number 2447",
    "prime number 2459",
    "prime number 2467",
    "prime number 2473",
    "prime number 2477",
    "prime number 2503",
    "prime number 2521",
    "prime number 2531",
    "prime number 2539",
    "prime number 2543",
    "prime number 2549",
    "prime number 2551",
    "prime number 2557",
    "prime number 2579",
    "prime number 2591",
    "prime number 2593",
    "prime number 2609",
    "prime number 2617",
    "prime number 2621",
    "prime number 2633",
    "prime number 2647",
    "prime number 2657",
    "prime number 2659",
    "prime number 2663",
    "prime number 2671",
    "prime number 2677",
    "prime number 2683",
    "prime number 2687",
    "prime number 2689",
    "prime number 2693",
    "prime number 2699",
    "prime number 2707",
    "prime number 2711",
    "prime number 2713",
    "prime number 2719",
    "prime number 2729",
    "prime number 2731",
    "prime number 2741",
    "prime number 2749",
    "prime number 2753",
    "prime number 2767",
    "prime number 2777",
    "prime number 2789",
    "prime number 2791",
    "prime number 2797",
    "prime number 2801",
    "prime number 2803",
    "prime number 2819",
    "prime number 2833",
    "prime number 2837",
    "prime number 2843",
    "prime number 2851",
    "prime number 2857",
    "prime number 2861",
    "prime number 2879",
    "prime number 2887",
    "prime number 2897",
    "prime number 2903",
    "prime number 2909",
    "prime number 2917",
    "prime number 2927",
    "prime number 2939",
    "prime number 2953",
    "prime number 2957",
    "prime number 2963",
    "prime number 2969",
    "prime number 2971",
    "prime number 2999",
    "prime number 3001",
    "prime number 3011",
    "prime number 3019",
    "prime number 3023",
    "prime number 3037",
    "prime number 3041",
    "prime number 3049",
    "prime number 3061",
    "prime number 3067",
    "prime number 3079",
    "prime number 3083",
    "prime number 3089",
    "prime number 3109",
    "prime number 3119",
    "prime number 3121",
    "prime number 3137",
    "prime number 3163",
    "prime number 3167",
    "prime number 3169",
    "prime number 3181",
    "prime number 3187",
    "prime number 3191",
    "prime number 3203",
    "prime number 3209",
    "prime number 3217",
    "prime number 3221",
    "prime number 3229",
    "prime number 3251",
    "prime number 3253",
    "prime number 3257",
    "prime number 3259",
    "prime number 3271",
    "prime number 3299",
    "prime number 3301",
    "prime number 3307",
    "prime number 3313",
    "prime number 3319",
    "prime number 3323",
    "prime number 3329",
    "prime number 3331",
    "prime number 3343",
    "prime number 3347",
    "prime number 3359",
    "prime number 3361",
    "prime number 3371",
    "prime number 3373",
    "prime number 3389",
    "prime number 3391",
    "prime number 3407",
    "prime number 3413",
    "prime number 3433",
    "prime number 3449",
    "prime number 3457",
    "prime number 3461",
    "prime number 3463",
    "prime number 3467",
    "prime number 3469",
    "prime number 3491",
    "prime number 3499",
    "prime number 3511",
    "prime number 3517",
    "prime number 3527",
    "prime number 3529",
    "prime number 3533",
    "prime number 3539",
    "prime number 3541",
    "prime number 3547",
    "prime number 3557",
    "prime number 3559",
    "prime number 3571",
    "prime number 3581",
    "prime number 3583",
    "prime number 3593",
    "prime number 3607",
    "prime number 3613",
    "prime number 3617",
    "prime number 3623",
    "prime number 3631",
    "prime number 3637",
    "prime number 3643",
    "prime number 3659",
    "prime number 3671",
    "prime number 3673",
    "prime number 3677",
    "prime number 3691",
    "prime number 3697",
    "prime number 3701",
    "prime number 3709",
    "prime number 3719",
    "prime number 3727",
    "prime number 3733",
    "prime number 3739",
    "prime number 3761",
    "prime number 3767",
    "prime number 3769",
    "prime number 3779",
    "prime number 3793",
    "prime number 3797",
    "prime number 3803",
    "prime number 3821",
    "prime number 3823",
    "prime number 3833",
    "prime number 3847",
    "prime number 3851",
    "prime number 3853",
    "prime number 3863",
    "prime number 3877",
    "prime number 3881",
    "prime number 3889",
    "prime number 3907",
    "prime number 3911",
    "prime number 3917",
    "prime number 3919",
    "prime number 3923",
    "prime number 3929",
    "prime number 3931",
    "prime number 3943",
    "prime number 3947",
    "prime number 3967",
    "prime number 3989",
    "prime number 4001",
    "prime number 4003",
    "prime number 4007",
    "prime number 4013",
    "prime number 4019",
    "prime number 4021",
    "prime number 4027",
    "prime number 4049",
    "prime number 4051",
    "prime number 4057",
    "prime number 4073",
    "prime number 4079",
    "prime number 4091",
    "prime number 4093",
    "prime number 4099",
    "prime number 4111",
    "prime number 4127",
    "prime number 4129",
    "prime number 4133",
    "prime number 4139",
    "prime number 4153",
    "prime number 4157",
    "prime number 4159",
    "prime number 4177",
    "prime number 4201",
    "prime number 4211",
    "prime number 4217",
    "prime number 4219",
    "prime number 4229",
    "prime number 4231",
    "prime number 4241",
    "prime number 4243",
    "prime number 4253",
    "prime number 4259",
    "prime number 4261",
    "prime number 4271",
    "prime number 4273",
    "prime number 4283",
    "prime number 4289",
    "prime number 4297",
    "prime number 4327",
    "prime number 4337",
    "prime number 4339",
    "prime number 4349",
    "prime number 4357",
    "prime number 4363",
    "prime number 4373",
    "prime number 4391",
    "prime number 4397",
    "prime number 4409",
    "prime number 4421",
    "prime number 4423",
    "prime number 4441",
    "prime number 4447",
    "prime number 4451",
    "prime number 4457",
    "prime number 4463",
    "prime number 4481",
    "prime number 4483",
    "prime number 4493",
    "prime number 4507",
    "prime number 4513",
    "prime number 4517",
    "prime number 4519",
    "prime number 4523",
    "prime number 4547",
    "prime number 4549",
    "prime number 4561",
    "prime number 4567",
    "prime number 4583",
    "prime number 4591",
    "prime number 4597",
    "prime number 4603",
    "prime number 4621",
    "prime number 4637",
    "prime number 4639",
    "prime number 4643",
    "prime number 4649",
    "prime number 4651",
    "prime number 4657",
    "prime number 4663",
    "prime number 4673",
    "prime number 4679",
    "prime number 4691",
    "prime number 4703",
    "prime number 4721",
    "prime number 4723",
    "prime number 4729",
    "prime number 4733",
    "prime number 4751",
    "prime number 4759",
    "prime number 4783",
    "prime number 4787",
    "prime number 4789",
    "prime number 4793",
    "prime number 4799",
    "prime number 4801",
    "prime number 4813",
    "prime number 4817",
    "prime number 4831",
    "prime number 4861",
    "prime number 4871",
    "prime number 4877",
    "prime number 4889",
    "prime number 4903",
    "prime number 4909",
    "prime number 4919",
    "prime number 4931",
    "prime number 4933",
    "prime number 4937",
    "prime number 4943",
    "prime number 4951",
    "prime number 4957",
    "prime number 4967",
    "prime number 4969",
    "prime number 4973",
    "prime number 4987",
    "prime number 4993",
    "prime number 4999",
    "prime number 5003",
    "prime number 5009",
    "prime number 5011",
    "prime number 5021",
    "prime number 5023",
    "prime number 5039",
    "prime number 5051",
    "prime number 5059",
    "prime number 5077",
    "prime number 5081",
    "prime number 5087",
    "prime number 5099",
    "prime number 5101",
    "prime number 5107",
    "prime number 5113",
    "prime number 5119",
    "prime number 5147",
    "prime number 5153",
    "prime number 5167",
    "prime number 5171",
    "prime number 5179",
    "prime number 5189",
    "prime number 5197",
    "prime number 5209",
    "prime number 5227",
    "prime number 5231",
    "prime number 5233",
    "prime number 5237",
    "prime number 5261",
    "prime number 5273",
    "prime number 5279",
    "prime number 5281",
    "prime number 5297",
    "prime number 5303",
    "prime number 5309",
    "prime number 5323",
    "prime number 5333",
    "prime number 5347",
    "prime number 5351",
    "prime number 5381",
    "prime number 5387",
    "prime number 5393",
    "prime number 5399",
    "prime number 5407",
    "prime number 5413",
    "prime number 5417",
    "prime number 5419",
    "prime number 5431",
    "prime number 5437",
    "prime number 5441",
    "prime number 5443",
    "prime number 5449",
    "prime number 5471",
    "prime number 5477",
    "prime number 5479",
    "prime number 5483",
    "prime number 5501",
    "prime number 5503",
    "prime number 5507",
    "prime number 5519",
    "prime number 5521",
    "prime number 5527",
    "prime number 5531",
    "prime number 5557",
    "prime number 5563",
    "prime number 5569",
    "prime number 5573",
    "prime number 5581",
    "prime number 5591",
    "prime number 5623",
    "prime number 5639",
    "prime number 5641",
    "prime number 5647",
    "prime number 5651",
    "prime number 5653",
    "prime number 5657",
    "prime number 5659",
    "prime number 5669",
    "prime number 5683",
    "prime number 5689",
    "prime number 5693",
    "prime number 5701",
    "prime number 5711",
    "prime number 5717",
    "prime number 5737",
    "prime number 5741",
    "prime number 5743",
    "prime number 5749",
    "prime number 5779",
    "prime number 5783",
    "prime number 5791",
    "prime number 5801",
    "prime number 5807",
    "prime number 5813",
    "prime number 5821",
    "prime number 5827",
    "prime number 5839",
    "prime number 5843",
    "prime number 5849",
    "prime number 5851",
    "prime number 5857",
    "prime number 5861",
    "prime number 5867",
    "prime number 5869",
    "prime number 5879",
    "prime number 5881",
    "prime number 5897",
    "prime number 5903",
    "prime number 5923",
    "prime number 5927",
    "prime number 5939",
    "prime number 5953",
    "prime number 5981",
    "prime number 5987",
    "prime number 6007",
    "prime number 6011",
    "prime number 6029",
    "prime number 6037",
    "prime number 6043",
    "prime number 6047",
    "prime number 6053",
    "prime number 6067",
    "prime number 6073",
    "prime number 6079",
    "prime number 6089",
    "prime number 6091",
    "prime number 6101",
    "prime number 6113",
    "prime number 6121",
    "prime number 6131",
    "prime number 6133",
    "prime number 6143",
    "prime number 6151",
    "prime number 6163",
    "prime number 6173",
    "prime number 6197",
    "prime number 6199",
    "prime number 6203",
    "prime number 6211",
    "prime number 6217",
    "prime number 6221",
    "prime number 6229",
    "prime number 6247",
    "prime number 6257",
    "prime number 6263",
    "prime number 6269",
    "prime number 6271",
    "prime number 6277",
    "prime number 6287",
    "prime number 6299",
    "prime number 6301",
    "prime number 6311",
    "prime number 6317",
    "prime number 6323",
    "prime number 6329",
    "prime number 6337",
    "prime number 6343",
    "prime number 6353",
    "prime number 6359",
    "prime number 6361",
    "prime number 6367",
    "prime number 6373",
    "prime number 6379",
    "prime number 6389",
    "prime number 6397",
    "prime number 6421",
    "prime number 6427",
    "prime number 6449",
    "prime number 6451",
    "prime number 6469",
    "prime number 6473",
    "prime number 6481",
    "prime number 6491",
    "prime number 6521",
    "prime number 6529",
    "prime number 6547",
    "prime number 6551",
    "prime number 6553",
    "prime number 6563",
    "prime number 6569",
    "prime number 6571",
    "prime number 6577",
    "prime number 6581",
    "prime number 6599",
    "prime number 6607",
    "prime number 6619",
    "prime number 6637",
    "prime number 6653",
    "prime number 6659",
    "prime number 6661",
    "prime number 6673",
    "prime number 6679",
    "prime number 6689",
    "prime number 6691",
    "prime number 6701",
    "prime number 6703",
    "prime number 6709",
    "prime number 6719",
    "prime number 6733",
    "prime number 6737",
    "prime number 6761",
    "prime number 6763",
    "prime number 6779",
    "prime number 6781",
    "prime number 6791",
    "prime number 6793",
    "prime number 6803",
    "prime number 6823",
    "prime number 6827",
    "prime number 6829",
    "prime number 6833",
    "prime number 6841",
    "prime number 6857",
    "prime number 6863",
    "prime number 6869",
    "prime number 6871",
    "prime number 6883",
    "prime number 6899",
    "prime number 6907",
    "prime number 6911",
    "prime number 6917",
    "prime number 6947",
    "prime number 6949",
    "prime number 6959",
    "prime number 6961",
    "prime number 6967",
    "prime number 6971",
    "prime number 6977",
    "prime number 6983",
    "prime number 6991",
    "prime number 6997",
    "prime number 7001",
    "prime number 7013",
    "prime number 7019",
    "prime number 7027",
    "prime number 7039",
    "prime number 7043",
    "prime number 7057",
    "prime number 7069",
    "prime number 7079",
    "prime number 7103",
    "prime number 7109",
    "prime number 7121",
    "prime number 7127",
    "prime number 7129",
    "prime number 7151",
    "prime number 7159",
    "prime number 7177",
    "prime number 7187",
    "prime number 7193",
    "prime number 7207",
    "prime number 7211",
    "prime number 7213",
    "prime number 7219",
    "prime number 7229",
    "prime number 7237",
    "prime number 7243",
    "prime number 7247",
    "prime number 7253",
    "prime number 7283",
    "prime number 7297",
    "prime number 7307",
    "prime number 7309",
    "prime number 7321",
    "prime number 7331",
    "prime number 7333",
    "prime number 7349",
    "prime number 7351",
    "prime number 7369",
    "prime number 7393",
    "prime number 7411",
    "prime number 7417",
    "prime number 7433",
    "prime number 7451",
    "prime number 7457",
    "prime number 7459",
    "prime number 7477",
    "prime number 7481",
    "prime number 7487",
    "prime number 7489",
    "prime number 7499",
    "prime number 7507",
    "prime number 7517",
    "prime number 7523",
    "prime number 7529",
    "prime number 7537",
    "prime number 7541",
    "prime number 7547",
    "prime number 7549",
    "prime number 7559",
    "prime number 7561",
    "prime number 7573",
    "prime number 7577",
    "prime number 7583",
    "prime number 7589",
    "prime number 7591",
    "prime number 7603",
    "prime number 7607",
    "prime number 7621",
    "prime number 7639",
    "prime number 7643",
    "prime number 7649",
    "prime number 7669",
    "prime number 7673",
    "prime number 7681",
    "prime number 7687",
    "prime number 7691",
    "prime number 7699",
    "prime number 7703",
    "prime number 7717",
    "prime number 7723",
    "prime number 7727",
    "prime number 7741",
    "prime number 7753",
    "prime number 7757",
    "prime number 7759",
    "prime number 7789",
    "prime number 7793",
    "prime number 7817",
    "prime number 7823",
    "prime number 7829",
    "prime number 7841",
    "prime number 7853",
    "prime number 7867",
    "prime number 7873",
    "prime number 7877",
    "prime number 7879",
    "prime number 7883",
    "prime number 7901",
    "prime number 7907",
    "prime number 7919",
];

#[cfg(test)]
mod tests {
    use super::{Mode, Personality, REAL_THINGS};

    #[test]
    fn real_things_has_exactly_one_thousand_entries() {
        assert_eq!(REAL_THINGS.len(), 1000);
    }

    #[test]
    fn snarky_messages_include_real_reference() {
        let personality = Personality::new(Mode::Snarky);
        let message = personality.explain_typo();
        assert!(message.contains("Reference:"));
        assert!(REAL_THINGS
            .iter()
            .any(|reference| message.contains(reference)));
    }
}
